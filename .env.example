############################################
# Text2SQL â€” Environment Template (.env.example)
#
# Notes:
# - Do NOT commit real secrets into .env
# - Several components have hardcoded credential defaults in code.
#   These defaults are NOT safe and are NOT documented here.
# - Provider API keys may be consumed implicitly by libraries depending on LLM_PROVIDER.
############################################


# Shared secret for internal service-to-service auth
# Required for sensitive operations (ops, admin)
INTERNAL_AUTH_TOKEN=

############################
# DAL / Storage Providers
# (Optional: these select backends for DAL interfaces)
############################

# Graph store provider (default in code: memgraph)
GRAPH_STORE_PROVIDER=memgraph

# Most stores default in code: postgres
CACHE_STORE_PROVIDER=postgres
EXAMPLE_STORE_PROVIDER=postgres
REGISTRY_STORE_PROVIDER=postgres
SCHEMA_STORE_PROVIDER=postgres
SCHEMA_INTROSPECTOR_PROVIDER=postgres
METADATA_STORE_PROVIDER=postgres
PATTERN_RUN_STORE_PROVIDER=postgres
CONVERSATION_STORE_PROVIDER=postgres
FEEDBACK_STORE_PROVIDER=postgres
INTERACTION_STORE_PROVIDER=postgres


############################
# Dataset Mode
# Controls which query-target dataset is used by default.
############################

# Dataset mode: "synthetic" (default) or "pagila" (DEPRECATED)
# Warning: "pagila" is deprecated and will emit a runtime warning. Use "synthetic".
DATASET_MODE=synthetic


############################
# Ontology / Canonicalization
# Controls SpaCy-based entity recognition for query grounding.
############################

# Enable SpaCy-based ontology mapping (required for synonym resolution)
# Set to true to ground user queries with schema hints before retrieval.
SPACY_ENABLED=true

############################
# Postgres connection for DAL-backed stores
# (Used when postgres-backed providers are selected)
#
# IMPORTANT:
# - Set DB_PASS explicitly. The code has a hardcoded default, but it is not safe to rely on.
# - DB_NAME defaults based on DATASET_MODE if not explicitly set.
############################

# Query-target database provider (default: postgres)
# Use QUERY_TARGET_BACKEND or QUERY_TARGET_PROVIDER; BACKEND takes precedence.
# Values: postgres | sqlite | mysql | snowflake
QUERY_TARGET_BACKEND=postgres
# QUERY_TARGET_PROVIDER=postgres
# SQLITE_DB_PATH=./local-data/query-target.sqlite

# MySQL/MariaDB query target (uses DB_* variables above)
# QUERY_TARGET_PROVIDER=mysql
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=query_target
# DB_USER=root
# DB_PASS=

# Snowflake query target
# QUERY_TARGET_PROVIDER=snowflake
# SNOWFLAKE_ACCOUNT=
# SNOWFLAKE_USER=
# SNOWFLAKE_PASSWORD=
# SNOWFLAKE_AUTHENTICATOR=
# SNOWFLAKE_WAREHOUSE=
# SNOWFLAKE_DATABASE=
# SNOWFLAKE_SCHEMA=
# SNOWFLAKE_ROLE=
# SNOWFLAKE_QUERY_TIMEOUT_SECS=30
# SNOWFLAKE_POLL_INTERVAL_SECS=1
# SNOWFLAKE_MAX_ROWS=1000
# SNOWFLAKE_WARN_AFTER_SECS=10

DB_HOST=localhost
DB_PORT=5432
# Query-target database name. Derived from DATASET_MODE if not set.
# Explicit override: uncomment to use a specific database name.
# DB_NAME=synthetic
DB_USER=text2sql_ro
DB_PASS=


############################
# Seeding / Startup Validation
############################

# Fail fast on schema validation errors during startup (default: false)
# SEEDING_FAIL_FAST=false


############################
# Memgraph connection (GraphStore default: memgraph)
############################

MEMGRAPH_URI=bolt://localhost:7687
MEMGRAPH_USER=
MEMGRAPH_PASSWORD=


############################
# Control-plane DB isolation (feature-gated)
#
# DB_ISOLATION_ENABLED defaults to false in code.
# If set to true, you must provide CONTROL_DB_HOST and CONTROL_DB_PASSWORD (and optionally port/name/user).
#
# IMPORTANT:
# - CONTROL_DB_PASSWORD has a hardcoded default in code, but it is not safe to rely on.
############################

DB_ISOLATION_ENABLED=false
CONTROL_DB_HOST=
CONTROL_DB_PORT=5432
CONTROL_DB_NAME=agent_control
CONTROL_DB_USER=postgres
CONTROL_DB_PASSWORD=


############################
# LLM configuration
#
# LLM_PROVIDER defaults to "openai" in code. API keys may be consumed implicitly by libraries.
############################

LLM_PROVIDER=openai
LLM_MODEL=
LLM_MODEL_LIGHT=

OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GOOGLE_API_KEY=


############################
# MCP connectivity
#
# Used by agent MCP client and service integrations.
############################

MCP_SERVER_URL=http://localhost:8000/messages
MCP_TRANSPORT=sse


# Default tenant context
DEFAULT_TENANT_ID=1


# Telemetry (Agent)
#
# TELEMETRY_BACKEND defaults to "otel" in code.
# "otel" enables OTEL spans (recommended).
# "dual" is NOT implemented and will emit a warning, falling back to otel.
############################

TELEMETRY_BACKEND=otel


############################
# OTEL Worker (feature-gated; only if you run observability stack)
#
# IMPORTANT:
# - Some credentials have dev defaults in code; do NOT rely on them.
############################

POSTGRES_URL=
POSTGRES_USER=
POSTGRES_PASSWORD=

MINIO_ENDPOINT=
MINIO_BUCKET=otel-traces
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=

OTEL_ENVIRONMENT=local

# If your OTEL worker supports schema selection, set it here
OTEL_DB_SCHEMA=


############################
# Airflow Evaluation Stack (optional)
# Only needed if running docker-compose.evals.yml
############################

AIRFLOW_IMAGE_NAME=apache/airflow:2.8.0
AIRFLOW_UID=50000
_PIP_ADDITIONAL_DEPENDENCIES=

# Airflow Database (separate from main Postgres)
AIRFLOW_POSTGRES_USER=airflow
AIRFLOW_POSTGRES_PASSWORD=
AIRFLOW_POSTGRES_DB=airflow

# Airflow Redis
AIRFLOW_REDIS_PASSWORD=

# Airflow Webserver
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=

# Configurable Ports
MEMGRAPH_LAB_PORT=3000
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
